<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>千里之行 始于足下 - ARTS第十一周</title>
    <meta name="description" content="">
    <meta name="author" content="qianlizhixing">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Le styles -->
    <link href="/theme/bootstrap.min.css" rel="stylesheet">
    <link href="/theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="/theme/local.css" rel="stylesheet">
    <link href="/theme/pygments.css" rel="stylesheet">
    <link rel="shortcut icon" href="/theme/images/icons/favicon.ico" type="image/x-icon">
</head>

<body>

    <div class="navbar">
        <div class="navbar-inner">
            <div class="container">

                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>

                <a class="brand" name="hostpage">千里之行 始于足下</a>

                <div class="nav-collapse">
                    <ul class="nav">
                    </ul>
                </div>

            </div>
        </div>
    </div>

    <div class="container">
        <div class="content">
            <div class="row">

                <div class="span9">
<div class='article'>
    <div class="content-title">
        <h1>ARTS第十一周</h1>
2020-07-06

<a class="url fn">qianlizhixing</a>


    </div>

    <div><h2>Algorithm</h2>
<p>leetcode 433 最小基因变化</p>
<ul>
<li><a href="https://leetcode-cn.com/problems/minimum-genetic-mutation/">原题</a></li>
<li><a href="https://github.com/qianlizhixing12/leetcode/blob/master/python/433.py">解题</a></li>
</ul>
<h2>Review</h2>
<blockquote>
<p>https://jsonapi.org/format/</p>
<p>http://jsonapi.org.cn/format/</p>
<p>https://github.com/kalasjocke/hyp</p>
<p>https://www.kutu66.com/GitHub/article_108976</p>
</blockquote>
<p>json api风格</p>
<h3>介绍</h3>
<ul>
<li>数据交互规范，定义客户端如何获取修改资源，以及服务端如何响应</li>
<li>定义业界规范，有利于框架实现</li>
<li>常用的api风格，RPC，REST，GraphQL</li>
</ul>
<h3>约定</h3>
<ul>
<li>双方必须包含Content-Type: application/vnd.api+json请求头</li>
<li>不能包含媒体类型</li>
</ul>
<h4>top level</h4>
<ul>
<li>json api 顶级对象</li>
<li>必须至少包含data(primary data),errors(错误列表),meta(非标准元信息)一个</li>
<li>data，errors不能同时存在</li>
<li>可以包含jsonapi,links,include(primary data相关链接)</li>
<li>可以包含self,retated</li>
<li>primary data代表请求单一资源(资源对象或null)或资源集合(资源对象列表或[])</li>
</ul>
<h4>资源对象</h4>
<ul>
<li>必须包含id,type</li>
<li>可以包含attribute,relationshiops,links,meta</li>
</ul>
<h3>demo</h3>
<div class="highlight"><pre><span></span><code><span class="c1">#安装</span>
<span class="c1">#pip install hyp</span>

<span class="kn">from</span> <span class="nn">marshmallow</span> <span class="kn">import</span> <span class="n">Serializer</span><span class="p">,</span> <span class="n">fields</span>
<span class="kn">from</span> <span class="nn">hyp.responder</span> <span class="kn">import</span> <span class="n">Responder</span>


<span class="k">class</span> <span class="nc">CommentSerializer</span><span class="p">(</span><span class="n">Serializer</span><span class="p">):</span>
  <span class="nb">id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>
  <span class="n">content</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">PersonSerializer</span><span class="p">(</span><span class="n">Serializer</span><span class="p">):</span>
  <span class="nb">id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>
  <span class="n">name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">PostSerializer</span><span class="p">(</span><span class="n">Serializer</span><span class="p">):</span>
  <span class="nb">id</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">()</span>
  <span class="n">title</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">CommentResponder</span><span class="p">(</span><span class="n">Responder</span><span class="p">):</span>
  <span class="n">TYPE</span> <span class="o">=</span> <span class="s1">&#39;comment&#39;</span>
  <span class="n">SERIALIZER</span> <span class="o">=</span> <span class="n">CommentSerializer</span>


<span class="k">class</span> <span class="nc">PersonResponder</span><span class="p">(</span><span class="n">Responder</span><span class="p">):</span>
  <span class="n">TYPE</span> <span class="o">=</span> <span class="s1">&#39;person&#39;</span>
  <span class="n">SERIALIZER</span> <span class="o">=</span> <span class="n">PersonSerializer</span>


<span class="k">class</span> <span class="nc">PostResponder</span><span class="p">(</span><span class="n">Responder</span><span class="p">):</span>
  <span class="n">TYPE</span> <span class="o">=</span> <span class="s1">&#39;post&#39;</span>
  <span class="n">SERIALIZER</span> <span class="o">=</span> <span class="n">PostSerializer</span>
  <span class="n">LINKS</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">&#39;comments&#39;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s1">&#39;responder&#39;</span><span class="p">:</span> <span class="n">CommentResponder</span><span class="p">(),</span>
          <span class="s1">&#39;href&#39;</span><span class="p">:</span> <span class="s1">&#39;http://example.com/comments/</span><span class="si">{posts.comments}</span><span class="s1">&#39;</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="s1">&#39;author&#39;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s1">&#39;responder&#39;</span><span class="p">:</span> <span class="n">PersonResponder</span><span class="p">(),</span>
          <span class="s1">&#39;href&#39;</span><span class="p">:</span> <span class="s1">&#39;http://example.com/people/</span><span class="si">{posts.author}</span><span class="s1">&#39;</span><span class="p">,</span>
      <span class="p">},</span>
  <span class="p">}</span>


<span class="n">post</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span>
        <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;title&#39;</span><span class="p">:</span>
        <span class="s1">&#39;My post&#39;</span><span class="p">,</span>
    <span class="s1">&#39;comments&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;A comment&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s1">&#39;content&#39;</span><span class="p">:</span> <span class="s1">&#39;Another comment&#39;</span>
        <span class="p">},</span>
    <span class="p">]</span>
<span class="p">}</span>

<span class="n">json</span> <span class="o">=</span> <span class="n">PostResponder</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">post</span><span class="p">,</span> <span class="n">linked</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;comments&#39;</span><span class="p">:</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;comments&#39;</span><span class="p">]})</span>

<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">{&quot;posts&quot;: {&quot;id&quot;: 1, &quot;title&quot;: &quot;My post&quot;, &quot;links&quot;: {&quot;comments&quot;: [1, 2]}}, &quot;linked&quot;: {&quot;comments&quot;: [{&quot;content&quot;: &quot;A comment&quot;, &quot;id&quot;: 1}, {&quot;content&quot;: &quot;Another comment&quot;, &quot;id&quot;: 2}]}, &quot;links&quot;: {&quot;posts.comments&quot;: {&quot;href&quot;: &quot;http://example.com/comments/{posts.comments}&quot;, &quot;type&quot;: &quot;comments&quot;}}}</span>
<span class="sd">&#39;&#39;&#39;</span>
</code></pre></div>


<h2>Tip</h2>
<p>python模板字符串，使用f'...{var}...'格式化字符串，易读易用</p>
<h2>Share</h2>
<h3>Electron(一)</h3>
<h4>安装</h4>
<div class="highlight"><pre><span></span><code><span class="c1">#依赖</span>
node -v
npm -v

<span class="c1">#安装</span>
npm install electron
</code></pre></div>


<h4>第一个程序(主流程)</h4>
<div class="highlight"><pre><span></span><code><span class="kr">const</span> <span class="p">{</span> <span class="nx">app</span><span class="p">,</span> <span class="nx">BrowserWindow</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;electron&#39;</span><span class="p">)</span>

<span class="kd">function</span> <span class="nx">createWindow</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">//打开窗体</span>
  <span class="kd">let</span> <span class="nx">win</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BrowserWindow</span><span class="p">({</span>
    <span class="nx">width</span><span class="o">:</span> <span class="mi">800</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span> <span class="mi">600</span><span class="p">,</span>
    <span class="nx">webPreferences</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">nodeIntegration</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">})</span>

  <span class="c1">//加载起始页</span>
  <span class="nx">win</span><span class="p">.</span><span class="nx">loadFile</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">)</span>

  <span class="c1">//开启调试器</span>
  <span class="nx">win</span><span class="p">.</span><span class="nx">webContents</span><span class="p">.</span><span class="nx">openDevTools</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1">//Electron结束初始化后调用</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">whenReady</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">createWindow</span><span class="p">)</span>

<span class="c1">//window-all-closed窗体关闭回调事件</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;window-all-closed&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">platform</span> <span class="o">!==</span> <span class="s1">&#39;darwin&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">app</span><span class="p">.</span><span class="nx">quit</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">})</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;activate&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">BrowserWindow</span><span class="p">.</span><span class="nx">getAllWindows</span><span class="p">().</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">createWindow</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>

    <hr>
</div>
                </div>

                <div class="span3">

                    <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
                        <ul class="nav nav-list">
                            <li class="nav-header">
                                Site
                            </li>

                            <li><a href="/archives.html">Archives</a>
                            <li><a href="/tags.html">Tags</a>
                        </ul>
                    </div>


                    <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
                        <ul class="nav nav-list">
                            <li class="nav-header">
                                Categories
                            </li>

                            <li><a href="/category/arts.html">ARTS</a></li>
                        </ul>
                    </div>
                </div>             </div>         </div> 
        <footer>
            <br />
            <p><a name="hostpage">千里之行 始于足下</a> &copy; qianlizhixing 2021</p>
        </footer>

    </div> <!-- /container -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="/theme/bootstrap-collapse.js"></script>
    <script>
        document.getElementsByName("hostpage").forEach((item) => {
            item.href = window.location.origin;
        });
    </script>
</body>

</html>